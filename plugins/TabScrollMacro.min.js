/***
|''Name:''|TabScrollMacro|
|''Description:''|makes the vertical tabset in SideBarTabs in ~TiddlySpace scrollable|
|''Documentation:''|http://tobibeer.tiddlyspace.com/#TabScroll|
|''Author:''|[[Tobias Beer]]|
|''Version:''|1.0.2 (2010-10-09)|
|''Source''|https://raw.github.com/tobibeer/TiddlyWikiPlugins/master/plugins/TabScrollMacro.js|
|''Original Idea''|http://valums.com/vertical-scrolling-menu|
|''~CoreVersion:''|version 2.6 or better|
/%***/
(function (e) { config.macros.tabscroll = { handler: function (t, n, r, i, s, o) { el = e("#sidebarTabs").empty(); wikify(store.getTiddlerText("SideBarTabs##TABS").format([store.getTiddlerText("SideBarTools") ? store.getTiddlerText("SideBarTabs##TOOLS") : "", store.getTiddlerText("TabFollowing") ? store.getTiddlerText("SideBarTabs##FOLLOW") : ""]), t); var u = e("#sidebarTabs").find(".tabset").addClass("tabScroll"); u.wrap('<div class="tabScrollWrapper" />'); var a = u.parent(), f = 100, l = a.width(), c = a.height(), h = u.outerHeight() + 2 * f; a.mousemove(function (e) { var t = a.offset(), n = (e.pageY - t.top) * (h - c) / c - f; if (n < 0) n = 0; a.scrollTop(n) }) } }; config.macros.tabs.switchTab = function (t, n) { var r, i, s, o = e(t), u = o.closest(".tabsetWrapper"), a = o.attr("cookie"); o.children(".tab").each(function () { var t = e(this), r = t.attr("tab") == n; if (r) i = t; t.attr("class", "tab " + (r ? "tabSelected" : "tabUnselected")) }); if (i) { r = u.children(".tabContents"); if (r[0]) r.empty(); else r = e(createTiddlyElement(u[0], "div", null, "tabContents")); s = i.attr("content"); wikify(store.getTiddlerText(s), r[0], null, store.getTiddler(s)); if (a) { config.options[a] = n; saveOptionCookie(a) } } }; config.shadowTiddlers.StyleSheetTabScroll = "/*{{{*/\n" + "#sidebarTabs .tabsetWrapper .tabset .tab {display:block;padding:7px 7px 7px 3px;text-align:right;}\n" + "#sidebarTabs .tabsetWrapper .tabset," + ".tabScroll{padding:15px 0;display:block;height:auto;padding:0;width:6em;}\n" + ".tabScrollWrapper{position:relative;overflow:hidden;display:block;" + "height:220px;width:6em;float:left;top:0;}\n/*}}}*/"; store.addNotification("StyleSheetTabScroll", refreshStyles) })(jQuery)
//%/