/***
|''Name''|RewindPlugin|
|''Description''|Renders $target message with $target link to the last tiddler you came from|
|''Author''|Tobias Beer|
|''Version''|0.5.2|
|''Documentation:''|http://rewind.tiddlyspace.com/|
|''Source''|https://raw.github.com/tobibeer/TiddlyWikiPlugins/master/plugins/RewindPlugin.min.js|
|''License''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|
|''~CoreVersion''|2.5.3|
/%***/
(function(e){config.extensions.rewind={onlyPrettyLinks:false,insertAt:".subtitle",insertAfter:true,msgClass:"",tplRewindMessage:"« go back to [[%0]]%1",txtRewindPrettyLink:" where you clicked [[%0|%1]]"};onClickTiddlerLink_Rewind=onClickTiddlerLink;onClickTiddlerLink=function(t){onClickTiddlerLink_Rewind.apply(this,arguments);var n,r=config.extensions.rewind,i=resolveTarget(t||window.event),s=e(i).text(),o=i.getAttribute("tiddlyLink"),u=s!=o,a=e(story.getTiddler(o)),f=story.findContainingTiddler(i),l=e(r.insertAt,a);f=f?f.getAttribute("tiddler"):"";if(!u&&r.onlyPrettyLinks||e(i).closest(".rewind_message")[0]||!f||l.length==0)return;n=e(".rewind_message",a);if(n.length){n.empty()}else{n=e('<span class="rewind_message '+r.msgClass+'"/>');r.insertAfter?l.after(n):l.before(n)}wikify(r.tplRewindMessage.format([f,u?r.txtRewindPrettyLink.format([s,f]):"",s]),n[0])};config.shadowTiddlers.StyleSheetRewind=store.getTiddlerText("RewindPlugin##CSS");store.addNotification("StyleSheetRewind",refreshStyles)})(jQuery)
//%/
//{{{
/*
!CSS
.rewind_message{
    display:block;
    background-color:[[ColorPalette::TertiaryPale]];
    margin:3px 0 10px 0;
    padding:3px;
}
!END
*/
//}}}