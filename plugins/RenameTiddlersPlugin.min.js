/***
|''Name''|RenameTiddlersPlugin|
|''Author''|[[Tobias Beer|http://tobibeer.tiddlyspace.com]]|
|''Description''|Allows you to easily rename or delete tiddlers and have tags updated across multiple tiddlers|
|''Source''|https://raw.github.com/tobibeer/TiddlyWikiPlugins/master/plugins/RenameTiddlersPlugin.min.js|
|''Documentation''|http://renametiddlers.tiddlyspace.com|
|''Version''|0.9.0 BETA 2013-08-27|
|''~CoreVersion''|2.5.2|
|''License''|[[Creative Commons Attribution-Share Alike 3.0|http://creativecommons.org/licenses/by-sa/3.0/]]|
When you rename a tiddler that serves as a tag you will be asked whether you want to update the tagged tiddlers as well.
***/
//{{{
config.renameTiddler={lang:{rename:"Rename tag '%0' to '%1' in %2 tidder(s)?",remove:"Remove tag '%0' from %1 tidder(s)?"},updateTagged:function(e,t,n){var r,i,s,o,u,a,f;store.suspendNotifications();for(r=0;r<n.length;r++){a=n[r];if(t)a.tags.splice(a.tags.indexOf(e),1,t);else a.tags.splice(a.tags.indexOf(e),1);a.modified=new Date}store.resumeNotifications();store.notifyAll();if(config.options.chkAutoSave)autoSaveChanges()},core:{getTaggedTiddlersWritable:function(e,n){var r=[],i=this.getTaggedTiddlers(e);for(t=0;t<i.length;t++){tid=i[t];sp=tid.fields["server.permissions"];tRcp=tid.fields["server.recipe"];sRcp=config.extensions.tiddlyweb?config.extensions.tiddlyweb.status.space.recipe:"";pos=sRcp.indexOf("_private");if(tid.title==e||tid.title==n||!tRcp||sp&&(sp.indexOf("write")<0||pos!=sRcp.length-8||sRcp.substr(0,pos)!=tRcp.substr(0,pos)||tid.doNotSave&&tid.doNotSave()))continue;r.push(tid)}return r},saveTiddlerRENAMETIDDLERS:TiddlyWiki.prototype.saveTiddler,saveTiddler:function(e,t,n,r,i,s,o,u,a,f){var l,c;if(e!=t){var h=this.getTaggedTiddlersWritable(e,t);l=h.length;if(h.length){if(confirm(config.renameTiddler.lang.rename.format([e,t,l])))config.renameTiddler.updateTagged(e,t,h);if(!this.tiddlerExists(e)&&n=="")return null}}return this.saveTiddlerRENAMETIDDLERS(e,t,n,r,i,s,o,u,a,f)},removeTiddlerRENAMETIDDLER:TiddlyWiki.prototype.removeTiddler,removeTiddler:function(e){var t=this.getTaggedTiddlersWritable(e);if(t.length)if(confirm(config.renameTiddler.lang.remove.format([e,t.length])))config.renameTiddler.updateTagged(e,"",t);return this.removeTiddlerRENAMETIDDLER(e)}},init:function(){merge(TiddlyWiki.prototype,this.core)}};config.renameTiddler.init()
//}}}